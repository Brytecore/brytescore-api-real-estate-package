{
	"id": "https://cdn.brytecore.com/packages/realestate/schema.json",
	"$schema": "http://json-schema.org/draft-04/schema#",
	"description": "A Brytescore API package schema to track real estate events",
	"definitions": {
		"listing": {
			"description": "A real estate listing",
			"type": "object",
			"properties": {
				"address": { "$ref": "https://cdn.brytecore.com/packages/schemas/address.json#" },
				"bedrooms": { "type": "number" },
				"fullBaths": { "type": "number" },
				"geoLocation": { "$ref": "http://json-schema.org/geo#" },
				"halfBaths": { "type": "number" },
				"isAcreage": { "type": "boolean" },
				"isCondo": { "type": "boolean" },
				"isLot": { "type": "boolean" },
				"isRental": { "type": "boolean" },
				"isSingleFamily": { "type": "boolean" },
				"mlsId": { "type": "string" },
				"listingURL": { "type": "string", "format": "uri" },
				"photoURL": { "type": "string", "format": "uri" },
				"price": { "type": "number" },
				"schoolElementary": { "type": "string" },
				"schoolHigh": { "type": "string" },
				"schoolMiddle": { "type": "string" },
				"subdivision": { "type": "string" }
			},
			"required": [ "price", "mlsId" ]
		},
		"search": {
			"description": "A real estate listing search",
			"type": "object",
			"properties": {
				"address": { "$ref": "https://cdn.brytecore.com/packages/schemas/address.json#" },
				"bedroomsMin": { "type": "number" },
				"bedroomsMax": { "type": "number" },
				"cities": { "type": "array",  "items": { "type": "string" } },
				"counties": { "type": "array",  "items": { "type": "string" } },
				"description": { "type": "string" },
				"features": { "type": "array",  "items": { "type": "string" } },
				"fullBathsMax": { "type": "number" },
				"fullBathsMin": { "type": "number" },
				"geoLocation": { "$ref": "http://json-schema.org/geo#" },
				"halfBathsMax": { "type": "number" },
				"halfBathsMin": { "type": "number" },
				"id": { "type": "string" },
				"isAcreage": { "type": "boolean" },
				"isCondo": { "type": "boolean" },
				"isForeclosure": { "type": "boolean" },
				"isMultiFamily": { "type": "boolean" },
				"isRadiusSearch": { "type": "boolean" },
				"isSingleFamily": { "type": "boolean" },
				"mlsIds": { "type": "array",  "items": { "type": "string" } },
				"postalCodes": { "type": "array",  "items": { "type": "string" } },
				"priceMax": { "type": "number" },
				"priceMin": { "type": "number" },
				"radiusGeoLocation": { "$ref": "http://json-schema.org/geo#" },
				"radiusInMiles": { "type": "number" },
				"radiusSearchAddress": { "$ref": "https://cdn.brytecore.com/packages/schemas/address.json#" },
				"resultsCount": { "type": "number" },
				"schoolElementary": { "type": "string" },
				"schoolHigh": { "type": "string" },
				"schoolMiddle": { "type": "string" },
				"searchURL": { "type": "string" },
				"subdivision": { "type": "string" },
				"yearBuiltMax": { "type": "number" },
				"yearBuiltMin": { "type": "number" }
			}
		}
	},
	"oneOf": [
		{
			"title": "authenticated",
			"description": "",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/authenticated" },
				{
					"properties": {
						"data": {
							"type": "object",
							"properties": {
								"userClassification": { "enum": [ "agent", "staff", "visitor" ] }
							}
						}
					}
				}
			]
		},
		{
			"title": "calculatedMortgagePayment",
			"description": "Calculated a mortgage payment",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.calculatedMortgagePayment" ] },
						"data":  {
							"type": "object",
							"properties": {
								"downPayment": { "type": "number" },
								"listing":     { "$ref": "#/definitions/listing" },
								"price":       { "type": "number" },
								"rate":        { "type": "number" }
							},
							"required": [ "price", "downPayment", "rate" ]
						}
					}
				}
			]
		},
		{
			"title": "deletedSavedListing",
			"description": "Deleted a saved listing",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.deletedSavedListing" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "deletedSavedSearch",
			"description": "Deleted a saved search",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.deletedSavedSearch" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/search" }
							}
						}
					}
				}
			]
		},
		{
			"title": "dislikedListing",
			"description": "Disliked a listing",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.dislikedListing" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" },
								"reason":  { "type": "string" }
							},
							"required": [ "reason" ]
						}
					}
				}
			]
		},
		{
			"title": "hidListing",
			"description": "Hid a listing from search results",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.hidListing" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "likedListing",
			"description": "Liked a listing",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.likedListing" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" },
								"reason":  { "type": "string" }
							},
							"required": [ "reason" ]
						}
					}
				}
			]
		},
		{
			"title": "listingImpression",
			"description": "Listing displayed in search results",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.listingImpression" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "printedDrivingDirections",
			"description": "Printed driving directions",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.printedDrivingDirections" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing":      { "$ref": "#/definitions/listing" },
								"startAddress": { "$ref": "https://cdn.brytecore.com/packages/schemas/address.json#" }
							}
						}
					}
				}
			]
		},
		{
			"title": "printedListing",
			"description": "Printed a listing",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.printedListing" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "printedListingFlyer",
			"description": "Printed a listing flyer",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.printedListingFlyer" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "printedSearchResults",
			"description": "Printed search results",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.printedSearchResults" ] },
						"data":  {
							"type": "object",
							"properties": {
								"search": { "$ref": "#/definitions/search" }
							}
						}
					}
				}
			]
		},
		{
			"title": "requestedHomeAppraisal",
			"description": "Requested home appraisal",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.requestedHomeAppraisal" ] },
						"data":  {
							"type": "object",
							"properties": {
								"address": {
									"allOf": [
										{ "$ref": "https://cdn.brytecore.com/packages/schemas/address.json#" },
										{
											"required": [ "streetAddress", "city", "stateProvince", "postalCode" ]
										}
									]
								}
							}
						}
					}
				}
			]
		},
		{
			"title": "ratedListing",
			"description": "Rated a listing",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.ratedListing" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" },
								"rating":  { "type": "string" }
							},
							"required": [ "rating" ]
						}
					}
				}
			]
		},
		{
			"title": "requestedInfo",
			"description": "Requested more information on a listing",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.requestedInfo" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "requestedShowing",
			"description": "Requested a showing",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.requestedShowing" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "quickSearched",
			"description": "Ran a quick search",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.quickSearched" ] },
						"data":  {
							"type": "object",
							"properties": {
								"search": { "$ref": "#/definitions/search" }
							}
						}
					}
				}
			]
		},
		{
			"title": "searchedAgents",
			"description": "Searched for an agent",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.searchedAgents" ] },
						"data":  {
							"type": "object",
							"properties": {
								"expertise":   { "type": "string" },
								"language":    { "type": "string" },
								"officeName":  { "type": "string" },
								"serviceArea": { "type": "string" }
							}
						}
					}
				}
			]
		},
		{
			"title": "searchedListings",
			"description": "Ran a listing search",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.searchedListings" ] },
						"data":  {
							"type": "object",
							"properties": {
								"search": { "$ref": "#/definitions/search" }
							}
						}
					}
				}
			]
		},
		{
			"title": "searchedOffices",
			"description": "Searched for an office",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.searchedOffices" ] },
						"data": {
							"type": "object",
							"properties": {
								"officeName":  { "type": "string" },
								"serviceArea": { "type": "string" }
							}
						}
					}
				}
			]
		},
		{
			"title": "savedListing",
			"description": "Saved a listing",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.savedListing" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "savedSearch",
			"description": "Saved a search",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.savedSearch" ] },
						"data":  {
							"type": "object",
							"properties": {
								"search": { "$ref": "#/definitions/search" }
							}
						}
					}
				}
			]
		},
		{
			"title": "sharedListingEmail",
			"description": "Shared a listing by email",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.sharedListingEmail" ] },
						"data":  {
							"type": "object",
							"properties": {
								"toEmail":   { "type": "string", "format": "email" },
								"listing":   { "$ref": "#/definitions/listing" },
								"fromEmail": { "type": "string", "format": "email" }
							}
						}
					}
				}
			]
		},
		{
			"title": "sharedListingFacebook",
			"description": "Shared a listing with Facebook",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.sharedListingFacebook" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "sharedListingTwitter",
			"description": "Shared a listing with Twitter",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.sharedListingTwitter" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "submittedAgentContactForm",
			"description": "Submitted agent contact form",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.submittedAgentContactForm" ] },
						"data":  {
							"type": "object",
							"properties": {
								"agentId":    { "type": "string" },
								"customer":   {
									"type": "object",
									"allOf": [
										{ "$ref": "https://cdn.brytecore.com/packages/schemas/person.json#" },
										{ "required": [ "firstName", "lastName" ] }
									]
								},
								"email":      { "type": "string", "format": "email" },
								"formFields": { "type": "string" }
							},
							"required": [ "agentId", "email", "formFields" ]
						}
					}
				}
			]
		},
		{
			"title": "subscribedListingUpdates",
			"description": "Subscribed to listing updates",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.subscribedListingUpdates" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "subscribedSearch",
			"description": "Subscribed to a search",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.subscribedSearch" ] },
						"data":  {
							"type": "object",
							"properties": {
								"search": { "$ref": "#/definitions/search" }
							}
						}
					}
				}
			]
		},
		{
			"title": "unhidListing",
			"description": "Unhid listing from search results",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.unhidListing" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "unsubscribedListingUpdates",
			"description": "Unsubscribed from listing updates",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.unsubscribedListingUpdates" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "unsubscribedSearch",
			"description": "Unsubscribed from a search",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.unsubscribedSearch" ] },
						"data":  {
							"type": "object",
							"properties": {
								"search": { "$ref": "#/definitions/search" }
							}
						}
					}
				}
			]
		},
		{
			"title": "updatedSavedSearch",
			"description": "Updated a saved search",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.updatedSavedSearch" ] },
						"data":  {
							"type": "object",
							"properties": {
								"search": { "$ref": "#/definitions/search" }
							}
						}
					}
				}
			]
		},
		{
			"title": "viewedAgentProfile",
			"description": "Viewed an agent profile",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.viewedAgentProfile" ] },
						"data":  {
							"type": "object",
							"properties": {
								"agent": {
									"type": "object",
									"allOf": [
										{ "$ref": "https://cdn.brytecore.com/packages/schemas/userAccount.json#" },
										{
											"required": [ "firstName", "lastName" ]
										}
									]
								}
							}
						}
					}
				}
			]
		},
		{
			"title": "viewedDrivingDirections",
			"description": "Viewed driving directions",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.viewedDrivingDirections" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "viewedListingPhoto",
			"description": "Viewed a listing photo",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.viewedListingPhoto" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "viewedListing",
			"description": "Viewed a listing",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.viewedListing" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "viewedListing3DTour",
			"description": "Viewed a 3D tour",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.viewedListing3DTour" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "viewedListingFlyer",
			"description": "Viewed a listing flyer",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.viewedListingFlyer" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "viewedListingVirtualTour",
			"description": "Viewed a virtual tour",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.viewedListingVirtualTour" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "viewedOfficeProfile",
			"description": "Viewed an office profile",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.viewedOfficeProfile" ] },
						"data": {
							"type": "object",
							"properties": {
								"officeId":   { "type": "string" },
								"officeName": { "type": "string" }
							},
							"required": [ "officeId", "officeName" ]
						}
					}
				}
			]
		},
		{
			"title": "viewedSavedListing",
			"description": "Viewed a saved listing",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.viewedSavedListing" ] },
						"data":  {
							"type": "object",
							"properties": {
								"listing": { "$ref": "#/definitions/listing" }
							}
						}
					}
				}
			]
		},
		{
			"title": "viewedSavedSearch",
			"description": "Viewed a saved search",
			"type": "object",
			"allOf": [
				{ "$ref": "https://cdn.brytecore.com/packages/analytics/schema.json#/definitions/eventProperties" },
				{
					"properties": {
						"event": { "enum": [ "realestate.viewedSavedSearch" ] },
						"data":  {
							"type": "object",
							"properties": {
								"search": { "$ref": "#/definitions/search" }
							}
						}
					}
				}
			]
		}
	]
}
